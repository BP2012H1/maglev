= MagLev Change Log

== Changes for 23188  2010-04-06

* Added line editor support using Linenoise library
* Fix Trac 699 and part of 694
* Comment out kconv in irb since it depends on a C extension

== Changes for 23171  2010-04-02

* Updated to RubyGems 1.3.6
* Fixed problem exposed by Sinatra 1.0
* Added rdoc, ri, and erb executables to bin directory
* Fixed problem with Array.new returning nil for subclasses whose  
  initialize returned nil.
* Improved exception handler printout
* Fixed test rake in examples to not depend on Sinatra version
* Merged latest changes from psych master on github
* Fixed bug in psych: handling of empty and white-space only strings
* Fixed writing of alias and anchor in YAML
* Fix Trac 471, 621, 684  in irb .
* Fix Trac 631, 685, 686, 690, 691, 692 .
* Implemented ObjectSpace#define_finalizer 
* Added jcode
* Various fixes in underlying GemStone 3.0 system.

== Changes for 23101  2010-03-22

* Fix YAML issue with "maglev-gem install" for Sinatra 0.9.6
* Underlying changes prompted by migration work
* class CCallin works on Sparc
* class CCallout on Sparc supports both float and double args

== Changes for 23082  2010-03-19

* Upgrade from Ruby 1.8.6 to 1.8.7
* Changed operator names for Indexed search.  See IdentitySet#search for doc.
* Turn on ri and rdoc for RubyGems.  RubyGems 1.3.6 installs cleanly now.
* Fix Trac 643, 646, 650, 672, 674, 676, 677
* Fix Trac 677b, 678, 679, 680
* Fix Trac 76, 122, 174, 181, 182, 189, 270, 277, 524, 558
* FFI::Pointer is now identical to Smalltalk class CByteArray
* Several improvements to underlying GemStone system including:
  Refactor mutex code such that the return code from a mutex call is always 
  checked and we print out the file and line number where the error occurs.

== Changes for 22985  2010-03-09

* Add callback to Module#append_features
* Fixes and enhancements for underlying GemStone stats
  Added: 
    PermGenFullCount - Number of times the perm gen space was found to be full.
    CodeGenFullCount - Number of times the code gen space was found to be full.
    OldGenFullCount - Number of times the old gen space was found to be full.
    VoteOnDeadCount -  Number of times the session has voted on dead objects.
    ScavsPromToMkSwCount - Number of times a scavenge operation was promoted 
      to a Mark/Sweep operation.
    LastMarkSweepReasonCode - An internal code which indicates the reason for
      the last Mark/Sweep operation.
    LastScavengeReasonCode - An internal code which indicates the reason for 
      the last scavenge operation.
* Changed the index search method from 'select' to 'search'
  to avoid conflict with Enumerable#select.

== Changes for 22949  2010-03-02

* Fix Trac 669, 670, 671, 673
* Miscellaneous cleanup of examples
* YAML: Use FFI callbacks for IO
* A few underlying changes/bugfixes in GemStone

== Changes for 22932  2010-02-27

* Change back to 1.8.6 for at least one more build

== Changes for 22923  2010-02-26

* Changing base version from 1.8.6 to 1.8.7 so we can begin 1.8.7 work
* Fixed problem preventing update to RubyGems 1.3.6
* Fixed problem on Mac with FFI callout/callin that caused YAML crashes

== Changes for 22907  2010-02-24

* in FFI implement callback , implement C float args .
* parser warnings  now controlled by -W, -w, -VERBOSE flags ,
  but are always printed if a SyntaxError occurs.
* Merged latest updates of psych into MagLev
* Add Symbol#to_proc

== Changes for 22891  2010-02-18

* Switch from RbYaml to libyaml + Psych
* Fix Trac 610, 640, 662, 663, 664, 665, 666
* Fix Trac 483, 473, 457, 422 (fixed by a previous release)
* Implement ENV.delete
* Added Enumerable#each_slice (but no Enumerator support).
* Add Socket::Constants
* Indexing is fixed: clean up and turn on examples/persistence/indexing
* Major underlying changes to AIO in GemStone -- replaces the use of 
  POSIX asynchronous IO with our own thread-based IO system for writing tranlogs

== Changes for 22816  2010-02-02

* Replaced previously patched irb with unpatched irb.rb and irb library
* Fix Trac 657, 659, 661
* Fix assertion failure in Ruby 'break' in 'slow' build.
* persistence-api documentation: fixed bogus references to
  Module#persistable=
* Fix Trac 657 in implementation of class variables
* Test::Unit now works
* Fix Enumerable#count for no-parameter case

== Changes for 22804  2010-01-29

* Fix Trac 656 in implemention of eval
* Fix Trac 654,655 in the IR generator phase of Ruby parser
* Webrick updated with security patch from 1.8.6p388
* Fixed --stone option to maglev-ruby
* Added Maglev::System.stone_name to return the name of the stone the VM is
  connected to.
* More fixes to eval for constant resolution
* Improve commit performance by changes in AIO usage
* Improve tranlog write performance by avoiding unnecessary fsync() calls
* Added new stats StnAioFsyncCount and StnAioTimeInFsyncMs

== Changes for 22780  2010-01-22

* Fix Trac 652
* Fix Trac 653 in Lexer
* Various FFI
* Fix infinite loop on Sparc in high-res profiling
* Optimize Integer>>\\  to not compute unneeded quotient.
* In topaz, SET CLASS with no arg will print name of the current class
* Fix retry of timer thread connect in socketprim.c
* Fixes in GS for SOX complience
* Fixes for FFI alignment of nested structs and unions
* Fixes for RVM compliance

== Changes for 22725  2010-01-15

* Enhancements to make MagLev run under RVM
* Fixed bug that prevented Rake from running

== Changes for 22710  2010-0112

* Fixes to make haml work better
* Fixes to make rack 1.1 work
* Fixes to constant definitions
* Implemented Process::Status
* Fixes regression in Trac 592
* Fixes Trac 641a , 645, 647, 649
* Fixes compile error on Sparc Solaris
* Installable using RVM. See:  http://rvm.beginrescueend.com/
* Changed installers to use .tar.gz format rather than .zip
* Changed downloads from .zip to .tar.gz format.

== Changes for 22683  2010-01-04

* Optimize fetch/store to Ruby global variables
* Rewrite Hash, IdentityHash to no longer inherit from Smalltalk
  KeyValueDictionary ; the implementations are closer to pure Ruby.
* Fix parser failure part of Trac 483.
* Fix Trac 641.
* Changes to Thread implementation to go with changes to Smalltalk
  implementation of GsProcess>>terminate .
* Removed old workaround for json and trac 616, which has been fixed.
  If you were doing:     require 'maglev_json'
  You must instead do:   require 'json'

== Changes for 22635  2009-12-10

* Performance improvements for binding, some string operations
* fixes to pass more core/io specs.
* Moved mdb and hat_trick to examples/persistence.
* More Gprof support.  Add ability to suspend and resume sampling.
* Added methods temp_obj_space*  to System

== Changes for 22619  2009-12-03

* Added parsedate.rb
* make _equal? , _is_a? , _not , _kind_of ?  special selectors
  make equal?, is_a? , not, kind_of?  public methods in Object .
* Added lib/ruby/1.8/csv.rb which passes all 37 RubySpecs
* Clean up of many examples
* Fix GStore example.  Make begin_transaction a module function.
* Added -Mcommit and -Mpersistent command line parameters.
  -Mpersistent will start the VM in persistent mode.
  -Mcommit start the VM in persistent mode and perform a
  Maglev.commit_transaction just before the VM exits.
* rlwrap is turned off by default. Enable with -Mrlwrap.
* RDoc basically works.

== End of file ==
